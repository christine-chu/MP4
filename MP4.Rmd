---
title: "MP4"
author: "Christine Chu"
date: "April 25, 2018"
output: html_document
--- 

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
install.packages("mdsr")
install.packages("RMySQL")
library(mdsr)
library(RMySQL)
```

Database for Querying 
#replace quotation with dataset we choose
```{r}
db <- dbConnect_scidb(dbname = "lahman")
```


# Individual chunks to prevent overwriting of code.
Christine 
```{r}
series <- dbConnect_scidb(dbname = "lahman") 
series_df <- series %>% 
  dbGetQuery("SELECT DISTINCT ls.yearID, tf.franchName as 'Team_name', lt.teamID, sp.teamIDwinner as 'WinnerID',sp.round, sp.wins
FROM lahman.Salaries ls 
#JOIN lahman.HallOfFame hf ON hf.playerID = ls.playerID
JOIN lahman.Teams lt ON lt.teamID = ls.teamID
JOIN lahman.TeamsFranchises tf ON tf.franchID = lt.franchID
#join the series post data frame with the year ID to see the winner. 
JOIN lahman.SeriesPost sp ON ls.yearID = sp.yearID
WHERE lt.teamID = sp.teamIDwinner
#WHERE team = SeriesPost.team 
AND ls.yearID >= 2010
;")


#Using the world series far did they make it in the world series championship? color it by the type of game, NCSL, WS, etc. 

#National League (NL) Championship Series (NLCS) rior to 1969, the team with the best regular season win-loss record in each league automatically advanced to the World Series; since then each league has conducted a championship series (ALCS and NLCS) preceding the World Series to determine which teams will advance.
```


Nybria 
```{r}
db <- dbConnect_scidb(dbname = "imdb")
db %>%
  dbGetQuery("SELECT * FROM kind_type;")

# we cannot access this data base
cb <- dbConnect_scidb(dbname = "citibike")
# we cannot access this data base
ntaxi <- dbConnect_scidb(dbname = "nyctaxi")

```

```{r}
#I am trying to combine two tables the Hall of Fame and Salary, I am trying things out, so I have been having trouble 

dbGetQuery("SELECT hf.playerID, hf.inducted, s.playerID, s.salary
FROM lahman.HallOfFame hf
JOIN lahman.Salaries s ON hf.playerID = s.playerID
ORDER BY s.salary desc;")


# combining tables 

dbGetQuery("SELECT s.teamID, s.playerID, lt.teamID, lt.franchID, tf.franchID, tf.franchName, hf.playerID, hf.inducted
FROM lahman.Salaries
JOIN lahman.Teams lt ON s.teamID = lt.teamID
JOIN lahman.TeamsFranchises tf ON  lt.franchID = tf.franchID
JOIN lahman.HallOfFame hf ON s.playerID = hf.playerID
WHERE hf.inducted = 'Y'
AND s.yearID >= 2016;")

```

```{r}
bball <- dbConnect_scidb(dbname = "lahman")

bball_df <- bball %>%
  dbGetQuery("SELECT DISTINCT s.teamID, s.playerID, lt.teamID, lt.franchID, tf.franchID, tf.franchName, hf.playerID, hf.inducted, s.salary, s.yearid
FROM lahman.Salaries s
JOIN lahman.Teams lt ON s.teamID = lt.teamID
JOIN lahman.TeamsFranchises tf ON  lt.franchID = tf.franchID
JOIN lahman.HallOfFame hf ON s.playerID = hf.playerID
WHERE hf.inducted = 'N'
GROUP BY hf.playerID;
")

rod_salary <- bball %>%
  dbGetQuery("SELECT DISTINCT s.teamID, s.playerID, lt.teamID, lt.franchID, tf.franchID, tf.franchName, s.salary, s.yearid
FROM lahman.Salaries s
JOIN lahman.Teams lt ON s.teamID = lt.teamID
JOIN lahman.TeamsFranchises tf ON  lt.franchID = tf.franchID
WHERE s.playerID = 'rodrial01'
;
")

rod_line <-ggplot(data = rod_salary, aes(y = salary, x = yearid, color = franchName )) + geom_point()

rod_line 

```



Julia
--------------------------------------------------------
This project would not have been possible without github [^1].

##Links: 
[^1]: [Link to our GitHub Repositoury](https://github.com/christine-chu/MP4)